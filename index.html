<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repair Description Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .checkbox-card {
            transition: all 0.2s ease-in-out;
        }
        .checkbox-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        input:checked + .checkbox-card {
            border-color: #4f46e5;
            background-color: #eef2ff;
        }
        input:checked + .checkbox-card .checkbox-icon {
            opacity: 1;
        }
        .lang-btn {
            transition: all 0.2s ease-in-out;
        }
        .lang-btn.active {
            background-color: #4f46e5;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .category-title {
            grid-column: 1 / -1; /* Span all columns */
            margin-top: 1rem;
            margin-bottom: -0.5rem;
            font-weight: 600;
            color: #4b5563;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-3xl bg-white rounded-xl shadow-lg p-6 md:p-8">
        
        <!-- Language Switcher -->
        <div class="flex justify-center mb-6 bg-gray-200 rounded-lg p-1">
            <button id="lang-en" class="lang-btn w-1/3 py-2 px-4 rounded-md font-semibold text-gray-600 active">EN</button>
            <button id="lang-fr" class="lang-btn w-1/3 py-2 px-4 rounded-md font-semibold text-gray-600">FR</button>
            <button id="lang-nl" class="lang-btn w-1/3 py-2 px-4 rounded-md font-semibold text-gray-600">NL</button>
        </div>

        <div class="text-center mb-6">
            <h1 id="main-title" class="text-2xl md:text-3xl font-bold text-gray-800">Repair Description Generator</h1>
            <p id="subtitle" class="text-gray-500 mt-1">Select the components and services to generate a standard repair description.</p>
        </div>

        <!-- Component Selection Grid -->
        <div id="component-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-6">
            <!-- Checkboxes will be dynamically inserted here by JavaScript -->
        </div>

        <!-- Action Buttons -->
        <div class="mb-6">
            <button id="reset-btn" class="w-full bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors duration-200">
                Reset
            </button>
        </div>

        <!-- Output Area -->
        <div>
            <label id="output-label" for="output-desc" class="block text-sm font-medium text-gray-700 mb-1">Generated Description:</label>
            <div class="relative">
                <textarea id="output-desc" rows="4" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" readonly placeholder="Your generated description will appear here..."></textarea>
                <button id="copy-btn" class="absolute top-2 right-2 bg-gray-200 text-gray-600 hover:bg-gray-300 font-semibold py-1 px-3 rounded-md text-sm transition-colors duration-200">
                    Copy
                </button>
            </div>
            <div id="copy-feedback" class="text-green-600 text-sm mt-1 h-4 transition-opacity duration-300 opacity-0">
                Copied to clipboard!
            </div>
        </div>

    </div>

    <script>
        // --- DATA ---
        let currentLanguage = 'en';

        const translations = {
            en: {
                title: 'Repair Description Generator',
                subtitle: 'Select the components and services to generate a standard repair description.',
                reset: 'Reset',
                outputLabel: 'Generated Description:',
                placeholder: 'Your generated description will appear here...',
                copy: 'Copy',
                copied: 'Copied to clipboard!',
                replaceStart: 'We replaced the ',
                replaceEnd: ' of your device.',
                performStart: 'We performed the following service(s): ',
                and: ' and ',
                comma: ', ',
            },
            fr: {
                title: 'Générateur de Description de Réparation',
                subtitle: 'Sélectionnez les composants et services pour générer une description standard.',
                reset: 'Réinitialiser',
                outputLabel: 'Description Générée:',
                placeholder: 'Votre description générée apparaîtra ici...',
                copy: 'Copier',
                copied: 'Copié dans le presse-papiers!',
                replaceStart: 'Nous avons remplacé ',
                replaceEnd: ' de votre appareil.',
                performStart: 'Nous avons effectué le(s) service(s) suivant(s) : ',
                and: ' et ',
                comma: ', ',
            },
            nl: {
                title: 'Reparatie Omschrijving Generator',
                subtitle: 'Selecteer de onderdelen en services om een standaard omschrijving te genereren.',
                reset: 'Reset',
                outputLabel: 'Gegenereerde Omschrijving:',
                placeholder: 'Uw gegenereerde omschrijving verschijnt hier...',
                copy: 'Kopieer',
                copied: 'Gekopieerd naar klembord!',
                replaceStart: 'Wij hebben de ',
                replaceEnd: ' van uw toestel vervangen.',
                performStart: 'Wij hebben de volgende service(s) uitgevoerd: ',
                and: ' en ',
                comma: ', ',
            }
        };

        const componentCategories = {
            "Main Components": [
                { id: 'mainboard', type: 'replacement', names: { en: 'Mainboard (PBA)', fr: 'Carte Mère (PBA)', nl: 'Moederbord (PBA)' } },
                { id: 'battery', type: 'replacement', names: { en: 'Battery', fr: 'Batterie', nl: 'Batterij' } },
                { id: 'charging_port', type: 'replacement', names: { en: 'Charging Port', fr: 'Port de Charge', nl: 'Oplaadpoort' } },
            ],
            "Display (Standard)": [
                 { id: 'display', type: 'replacement', names: { en: 'Display', fr: 'Écran', nl: 'Display' } },
            ],
            "Display (Foldable)": [
                { id: 'main_display', type: 'replacement', names: { en: 'Main Display', fr: 'Écran Principal', nl: 'Hoofdscherm' } },
                { id: 'cover_display', type: 'replacement', names: { en: 'Cover Display', fr: 'Écran de Couverture', nl: 'Coverscherm' } },
            ],
            "External Components": [
                { id: 'backglass', type: 'replacement', names: { en: 'Backglass', fr: 'Vitre Arrière', nl: 'Achterkant (Glas)' } },
                { id: 'hinge', type: 'replacement', names: { en: 'Hinge', fr: 'Charnière', nl: 'Scharnier' } },
                { id: 'cameras', type: 'replacement', names: { en: 'Camera(s)', fr: 'Caméra(s)', nl: 'Camera(\'s)' } },
                { id: 'front_camera', type: 'replacement', names: { en: 'Front Camera', fr: 'Caméra Avant', nl: 'Voorcamera' } },
                { id: 'speaker', type: 'replacement', names: { en: 'Speaker', fr: 'Haut-parleur', nl: 'Luidspreker' } },
            ],
            "Buttons": [
                { id: 'power_button', type: 'replacement', names: { en: 'Power Button', fr: 'Bouton d\'alimentation', nl: 'Aan/uit-knop' } },
                { id: 'volume_buttons', type: 'replacement', names: { en: 'Volume Buttons', fr: 'Boutons de volume', nl: 'Volumeknoppen' } },
                { id: 'home_button', type: 'replacement', names: { en: 'Home Button', fr: 'Bouton Home', nl: 'Homeknop' } },
            ],
            "Accessories & Wearables": [
                { id: 'stylus', type: 'replacement', names: { en: 'Stylus', fr: 'Stylet', nl: 'Stylus' } },
                { id: 'left_bud', type: 'replacement', names: { en: 'Left Bud', fr: 'Écouteur gauche', nl: 'Linker oordopje' } },
                { id: 'right_bud', type: 'replacement', names: { en: 'Right Bud', fr: 'Écouteur droit', nl: 'Rechter oordopje' } },
                { id: 'cradle', type: 'replacement', names: { en: 'Cradle (Charging Case)', fr: 'Boîtier de chargement', nl: 'Oplaadcase' } },
            ],
            "Premium Services": [
                { id: 'unlocked_device', type: 'service', names: { en: 'Unlocked device', fr: 'Appareil déverrouillé', nl: 'Toestel ontgrendeld' } },
                { id: 'cleaned_buds', type: 'service', names: { en: 'Cleaned buds', fr: 'Écouteurs nettoyés', nl: 'Oordopjes gereinigd' } },
                { id: 'cleaned_usb', type: 'service', names: { en: 'Cleaned USB port', fr: 'Port USB nettoyé', nl: 'USB-poort gereinigd' } },
                { id: 'device_healthcare', type: 'service', names: { en: 'Device healthcare', fr: 'Bilan de santé de l\'appareil', nl: 'Toestel gezondheidscheck' } },
                { id: 'insurance_quote', type: 'service', names: { en: 'Insurance price quotation', fr: 'Devis pour assurance', nl: 'Prijsopgave voor verzekering' } },
                { id: 'data_recovery', type: 'service', names: { en: 'Data recovery', fr: 'Récupération de données', nl: 'Gegevensherstel' } },
                { id: 'data_transfer', type: 'service', names: { en: 'Data transfer', fr: 'Transfert de données', nl: 'Gegevensoverdracht' } },
            ],
            "Other": [
                { id: 'screen_protector', type: 'replacement', names: { en: 'Screen Protector', fr: 'Protection d\'Écran', nl: 'Schermbeschermer' } },
                { id: 'offer_declined', type: 'status', names: { en: 'Price offer declined', fr: 'Offre de prix refusée', nl: 'Prijsopgave geweigerd' }, 
                  sentences: { 
                      en: 'Price offer has been declined by customer - Repair cancelled.', 
                      fr: 'Offre de prix refusée par le client - Réparation annulée.', 
                      nl: 'Prijsopgave geweigerd door de klant - Reparatie geannuleerd.' 
                  } 
                },
            ]
        };

        // --- DOM ELEMENTS ---
        const componentGrid = document.getElementById('component-grid');
        const resetBtn = document.getElementById('reset-btn');
        const outputDesc = document.getElementById('output-desc');
        const copyBtn = document.getElementById('copy-btn');
        const copyFeedback = document.getElementById('copy-feedback');
        const mainTitle = document.getElementById('main-title');
        const subtitle = document.getElementById('subtitle');
        const outputLabel = document.getElementById('output-label');
        const langButtons = {
            en: document.getElementById('lang-en'),
            fr: document.getElementById('lang-fr'),
            nl: document.getElementById('lang-nl'),
        };

        // --- CORE LOGIC ---
        function renderUI() {
            const t = translations[currentLanguage];
            mainTitle.textContent = t.title;
            subtitle.textContent = t.subtitle;
            resetBtn.textContent = t.reset;
            outputLabel.textContent = t.outputLabel;
            outputDesc.placeholder = t.placeholder;
            copyBtn.textContent = t.copy;
            copyFeedback.textContent = t.copied;

            Object.values(langButtons).forEach(btn => btn.classList.remove('active'));
            langButtons[currentLanguage].classList.add('active');

            componentGrid.innerHTML = '';
            for (const category in componentCategories) {
                const title = document.createElement('h3');
                title.className = 'category-title';
                title.textContent = category;
                componentGrid.appendChild(title);

                componentCategories[category].forEach(component => {
                    const componentName = component.names[currentLanguage];
                    const label = document.createElement('label');
                    label.htmlFor = component.id;
                    label.className = 'cursor-pointer';

                    label.innerHTML = `
                        <input type="checkbox" id="${component.id}" name="component" value="${componentName}" data-type="${component.type}" class="sr-only">
                        <div class="checkbox-card flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg h-full relative">
                            <span class="checkbox-icon absolute top-2 right-2 text-indigo-600 opacity-0 transition-opacity">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
                            </span>
                            <span class="text-center font-medium text-gray-700">${componentName}</span>
                        </div>
                    `;
                    componentGrid.appendChild(label);
                });
            }
            
            if (document.querySelectorAll('input[name="component"]:checked').length > 0) {
                generateDescription();
            }
        }

        function generateDescription() {
            const t = translations[currentLanguage];
            const selectedStatus = document.querySelector("input[data-type='status']:checked");

            // If a status is selected, it overrides everything else.
            if (selectedStatus) {
                const componentId = selectedStatus.id;
                // Find the component in the data structure
                for (const category in componentCategories) {
                    const component = componentCategories[category].find(c => c.id === componentId);
                    if (component && component.sentences) {
                        outputDesc.value = component.sentences[currentLanguage];
                        return;
                    }
                }
            }

            const selectedReplacements = Array.from(document.querySelectorAll("input[data-type='replacement']:checked"))
                .map(cb => cb.value.replace(/ \(.+\)/, ''));
            const selectedServices = Array.from(document.querySelectorAll("input[data-type='service']:checked"))
                .map(cb => cb.value.replace(/ \(.+\)/, ''));

            let sentences = [];

            if (selectedReplacements.length > 0) {
                let componentString;
                if (selectedReplacements.length === 1) componentString = selectedReplacements[0];
                else if (selectedReplacements.length === 2) componentString = selectedReplacements.join(t.and);
                else componentString = selectedReplacements.slice(0, -1).join(t.comma) + t.and + selectedReplacements.slice(-1);
                
                let sentenceStart = t.replaceStart;
                if (currentLanguage === 'fr' && ['écran'].includes(componentString.toLowerCase().split(' ')[0])) {
                    sentenceStart = "Nous avons remplacé l'";
                }
                sentences.push(`${sentenceStart}${componentString.toLowerCase()}${t.replaceEnd}`);
            }

            if (selectedServices.length > 0) {
                let serviceString;
                if (selectedServices.length === 1) serviceString = selectedServices[0];
                else if (selectedServices.length === 2) serviceString = selectedServices.join(t.and);
                else serviceString = selectedServices.slice(0, -1).join(t.comma) + t.and + selectedServices.slice(-1);
                
                sentences.push(`${t.performStart}${serviceString.toLowerCase()}.`);
            }

            outputDesc.value = sentences.join(' ');
        }

        function resetSelection() {
            document.querySelectorAll('input[name="component"]:checked').forEach(cb => {
                cb.checked = false;
            });
            outputDesc.value = "";
        }

        function copyToClipboard() {
            if (!outputDesc.value) return;
            outputDesc.select();
            outputDesc.setSelectionRange(0, 99999);
            try {
                document.execCommand('copy');
                copyFeedback.classList.remove('opacity-0');
                setTimeout(() => {
                    copyFeedback.classList.add('opacity-0');
                }, 2000);
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }
        }
        
        function setLanguage(lang) {
            currentLanguage = lang;
            renderUI();
        }

        // --- EVENT LISTENERS ---
        componentGrid.addEventListener('change', generateDescription);
        resetBtn.addEventListener('click', resetSelection);
        copyBtn.addEventListener('click', copyToClipboard);
        langButtons.en.addEventListener('click', () => setLanguage('en'));
        langButtons.fr.addEventListener('click', () => setLanguage('fr'));
        langButtons.nl.addEventListener('click', () => setLanguage('nl'));

        // --- STARTUP ---
        renderUI();

    </script>
</body>
</html>
